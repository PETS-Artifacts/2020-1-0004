
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
	<meta charset="utf-8" />
	<meta name="Author" content="N3V Games" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var o=t[n]={exports:{}};e[n][0].call(o.exports,function(t){var o=e[n][1][t];return r(o||t)},o,o.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({QJf3ax:[function(e,t){function n(){}function r(e){function t(e){return e&&e instanceof n?e:e?a(e,i,o):o()}function s(n,r,o){e&&e(n,r,o);for(var i=t(o),a=l(n),u=a.length,f=0;u>f;f++)a[f].apply(i,r);var s=c[w[n]];return s&&s.push([h,n,r,i]),i}function p(e,t){g[e]=l(e).concat(t)}function l(e){return g[e]||[]}function d(e){return f[e]=f[e]||r(s)}function v(e,t){u(e,function(e,n){t=t||"feature",w[n]=t,t in c||(c[t]=[])})}var g={},w={},h={on:p,emit:s,get:d,listeners:l,context:t,buffer:v};return h}function o(){return new n}var i="nr@context",a=e("gos"),u=e(1),c={},f={},s=t.exports=r();s.backlog=c},{1:12,gos:"7eSDFh"}],ee:[function(e,t){t.exports=e("QJf3ax")},{}],3:[function(e,t){function n(e,t){return function(){r(e,[(new Date).getTime()].concat(i(arguments)),null,t)}}var r=e("handle"),o=e(1),i=e(2);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var a=["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit"],u=["addPageAction"],c="api-";o(a,function(e,t){newrelic[t]=n(c+t,"api")}),o(u,function(e,t){newrelic[t]=n(c+t)}),t.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),r("err",[e,(new Date).getTime()])}},{1:12,2:13,handle:"D5DuLP"}],gos:[function(e,t){t.exports=e("7eSDFh")},{}],"7eSDFh":[function(e,t){function n(e,t,n){if(r.call(e,t))return e[t];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return e[t]=o,o}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],handle:[function(e,t){t.exports=e("D5DuLP")},{}],D5DuLP:[function(e,t){function n(e,t,n,o){r.buffer([e],o),r.emit(e,t,n)}var r=e("ee").get("handle");t.exports=n,n.ee=r},{ee:"QJf3ax"}],XL7HBI:[function(e,t){function n(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:i(e,o,function(){return r++})}var r=1,o="nr@id",i=e("gos");t.exports=n},{gos:"7eSDFh"}],id:[function(e,t){t.exports=e("XL7HBI")},{}],G9z0Bl:[function(e,t){function n(){if(!v++){var e=d.info=NREUM.info,t=f.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&t){u(p,function(t,n){e[t]||(e[t]=n)});var n="https"===s.split(":")[0]||e.sslForHttp;d.proto=n?"https://":"http://",a("mark",["onload",i()],null,"api");var r=f.createElement("script");r.src=d.proto+e.agent,t.parentNode.insertBefore(r,t)}}}function r(){"complete"===f.readyState&&o()}function o(){a("mark",["domContent",i()],null,"api")}function i(){return(new Date).getTime()}var a=e("handle"),u=e(1),c=window,f=c.document;NREUM.o={ST:setTimeout,XHR:c.XMLHttpRequest,REQ:c.Request,EV:c.Event,PR:c.Promise,MO:c.MutationObserver},e(2);var s=(""+location).split("?")[0],p={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-885.min.js"},l=window.XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.addEventListener&&!/CriOS/.test(navigator.userAgent),d=t.exports={offset:i(),origin:s,features:{},xhrWrappable:l};f.addEventListener?(f.addEventListener("DOMContentLoaded",o,!1),c.addEventListener("load",n,!1)):(f.attachEvent("onreadystatechange",r),c.attachEvent("onload",n)),a("mark",["firstbyte",i()],null,"api");var v=0},{1:12,2:3,handle:"D5DuLP"}],loader:[function(e,t){t.exports=e("G9z0Bl")},{}],12:[function(e,t){function n(e,t){var n=[],o="",i=0;for(o in e)r.call(e,o)&&(n[i]=t(o,e[o]),i+=1);return n}var r=Object.prototype.hasOwnProperty;t.exports=n},{}],13:[function(e,t){function n(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}t.exports=n},{}]},{},["G9z0Bl"]);</script>

	<title>Trainz Portal</title>

	<meta property="og:title" content="Trainz Portal" />
	<meta property="og:url" content="http://www.trainzportal.com/" />

	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">



	<link rel="home" href="http://www.trainzportal.com/" />
	
	<link rel="stylesheet" href="/site/main_css" type="text/css" />
	<link rel="stylesheet" href="/site/mytrainz_css" type="text/css" />
	
	

	<!-- Google Scripts ------------------------------------------------------------------------------------------------ -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" type="text/javascript"></script>

	<!-- fancyBox ------------------------------------------------------------------------------------------------------ -->
	<link rel="stylesheet" href="/themes/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
	<script type="text/javascript" src="/themes/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
	<link rel="stylesheet" href="/themes/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
	<script type="text/javascript" src="/themes/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
	<script type="text/javascript" src="/themes/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
	<link rel="stylesheet" href="/themes/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
	<script type="text/javascript" src="/themes/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>	
	
	<!-- Nivo Slider --------------------------------------------------------------------------------------------------- -->
	<link rel="stylesheet" href="/themes/nivo/nivo-slider.css" type="text/css" />
	<script src="/themes/nivo/jquery.nivo.slider.pack.js" type="text/javascript"></script>
	
	<!-- Sticky ------------------------------------------------------------------------------------------------------ -->
	<script src="/themes/sticky/jquery.sticky.js" type="text/javascript"></script>
	
	<!-- DropZone  ------------------------------------------------------------------------------------------------------ -->	
	<link rel="stylesheet" href="/themes/third_party/tmc/styles/tmc_dropzone.css" type="text/css" />
	<script type="text/javascript" src="/themes/dropzone/dropzone.min.js"></script>

	<!-- Scripts ------------------------------------------------------------------------------------------------------ -->
	<script type="text/javascript">
		$(window).load(function() {
			$('#slider').nivoSlider({
				effect: 'fade',
				pauseOnHover: true,
				pauseTime: 5000,
			});
		});
	</script>
	
	<script type="text/javascript">
	$(document).ready(function() {
		$(".fancybox").fancybox({
		openEffect	: 'elastic',
		closeEffect	: 'none',
		nextEffect	: 'none',
		prevEffect	: 'none',
		fitToView	: false
		});
	});
	</script>

	<script>
  	$(document).ready(function(){$("#menu").sticky({topSpacing:-5});
  	});
	</script>
<!-- TMC Header -->   
<!-- Start Core Scripts -->
 
<script type="text/javascript">

// These are used by all pages

var edit_comment_id = 0;
var is_user_logged_in = false;

// -----------------------------------------
function checkUserLoggedIn()
{
	if (!is_user_logged_in)	
		alert("You must be logged in to perform this function");
		
	return is_user_logged_in; 
}

// --------------------------------------------
function isUserLoggedIn()
{
	return is_user_logged_in;	
}

// -----------------------------------
function displayMessages(messages)
{
	messages_html = "";
	
	if (messages.length > 0)
	{
		for (i = 0; i < messages.length; i++)
		{
			if (messages[i].type == "ERROR")
				messages_html = messages_html + "<div><font color=\"red\">"+messages[i].message+"</font></div>";	
			else if (messages[i].type == "SUCCESS")
				messages_html = messages_html + "<div><font color=\"green\">"+messages[i].message+"</font></div>";
			else if (messages[i].type == "WARNING")
				messages_html = messages_html + "<div><font color=\"orange\">"+messages[i].message+"</font></div>";
			else
				messages_html = messages_html + "<div><font color=\"#333333\">"+messages[i].message+"</font></div>";
		}
	}
	
	$("#general_messages").html(messages_html);	
}

// ------------------------------------------------------
// ACCEPTS: content row
// RETURNS: fomatted media post content
function formatMediaPostContent(value)
{
	var content = "";
	
	content = content + '<div class="MytrainzFeedItem MytrainzFeedItemOwner_'+value.member_id+'" id="MytrainzFeedItem_'+value.media_post_id+'">\n';
	content = content + '	<div class="ImageContainer">\n';
	content = content + '		<img src="'+value.img_src+'/500/'+value.image_name+'" width="'+value.scaled_image_width+'" height="'+value.scaled_image_height+'" style="vertical-align: middle;" class="fancybox" />\n';
	content = content + '		<div class="MytrainzFeedImageOverlayBG">\n';
	content = content + '			<a href="'+value.img_src+'/800/'+value.image_name+'" class="fancybox">\n';
	content = content + '				<div class="MytrainzFeedImageOverlayQuickview">\n';
	content = content + '				</div>\n';
	content = content + '			</a>\n';
	content = content + '			<a href="/mytrainz/view_media_post?media_post_id='+value.media_post_id+'" class="fancybox">\n';
	content = content + '				<div class="MytrainzFeedImageOverlayFullview">\n';
	content = content + '				</div>\n';
	content = content + '			</a>\n';
	content = content + '		</div>\n';
	content = content + '	</div>\n';	
	content = content + '	<div class="MytrainzFeedItemText">\n';
	content = content + '		<a href="/mytrainz/view_media_post?media_post_id='+value.media_post_id+'">\n';
	content = content + '			'+value.caption+'\n';
	content = content + '		</a>\n';
	content = content + '		<div class="MytrainzFeedItemPoster">\n';
	content = content + '			Posted by: '+value.posted_by_username+'\n';
	
	if (is_user_logged_in && value.is_user_owner == "N")
	{
		content = content + '			<span class="toggle_followed_user_'+value.member_id+'">\n';
		
		if (value.is_user_followed == "N")
			content = content + '			<a href="javascript:;" onclick="followUser(\''+value.member_id+'\')">(Follow)</a>\n';
		else if (value.is_user_followed == "Y")
			content = content + '			<a href="javascript:;" onclick="unfollowUser(\''+value.member_id+'\')">(Unfollow)</a>\n';
			
		content = content + '</span>';	
	}
	
	// Rating
	content = content + '<br />Rating: <span id="over_all_rating_'+value.media_post_id+'">'+value.overall_rating+'</span>';
	content = content + '<br />';
	if (is_user_logged_in && value.is_user_owner == "N")
	{
		
		if (value.user_can_rate == "Y")
		{
			content = content + '<span id="user_rate_'+value.media_post_id+'">';
			if (value.user_rating > 0)
				content = content + '<a href="javascript:;" onclick="rateMediaPost('+value.media_post_id+', 0)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/up.png" class="FeedIcons" alt="Remove Vote" title="Remove Vote" ></a>';
			else
				content = content + '<a href="javascript:;" onclick="rateMediaPost('+value.media_post_id+', 1)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/up-off.png" class="FeedIcons" alt="Vote Up" title="Vote Up"></a>';
			if (value.user_rating < 0)
				content = content + '<a href="javascript:;" onclick="rateMediaPost('+value.media_post_id+', 0)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/down.png" class="FeedIcons" alt="Remove Vote" title="Remove Vote"></a>';
			else
				content = content + '<a href="javascript:;" onclick="rateMediaPost('+value.media_post_id+', -1)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/down-off.png" class="FeedIcons" alt="Vote Down" title="Vote Down"></a>';
			content = content + '</span>';
		}
	}
	
	// Favourite Post
	if (is_user_logged_in && value.is_user_owner == "N")
	{
		content = content + '<span class="toggle_favourite_'+value.media_post_id+'">';
			if (value.is_favourite == "N")
				content = content + '<a href="javascript:;" onclick="addFavourite('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/fav-off.png" class="FeedIcons"></a>';
			if (value.is_favourite == "Y")
				content = content + '<a href="javascript:;" onclick="removeFavourite('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/fav-on.png" class="FeedIcons"></a>';
		content = content + '</span>';
	}
	
	// Follow Post
	if (is_user_logged_in && value.is_user_owner == "N")
	{
		content = content + '<span class="toggle_followed_media_'+value.media_post_id+'">';
			if (value.is_media_followed == "N")
				content = content + '<a href="javascript:;" onclick="followMedia('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/follow-off.png" class="FeedIcons"></a>';
			if (value.is_media_followed == "Y")
				content = content + '<a href="javascript:;" onclick="unfollowMedia('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/follow.png" class="FeedIcons"></a>';
		content = content + '</span>';
	}
	
	// Report Post
	if (is_user_logged_in && value.is_user_owner == "N")
	{
		content = content + '<span class="toggle_reported_media_'+value.media_post_id+'">';
			if (value.is_media_reported == "N")
				content = content + '<a href="javascript:;" onclick="reportMedia('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/report-off.png" class="FeedIcons"></a>';
			if (value.is_media_reported == "Y")
				content = content + '<font color="red"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/report-on.png" class="FeedIcons"></font>';
		content = content + '</span>';
	}
	
	// Edit and Delete Post
	if (value.user_can_edit == "Y"){
		content = content + '<a href="/mytrainz/edit_media_post?media_post_id='+value.media_post_id+'"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/edit.png" class="FeedIcons"></a>';
		content = content + '<a href="javascript:;" onclick="deleteMediaPost('+value.media_post_id+')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/delete.png" class="FeedIcons"></a>';
	}
	
	content = content + '			</span>\n';				
	content = content + '		</div>\n';	
	content = content + '	</div>\n';
	content = content + '</div>\n';
	
	return content;
}

// -------------------------------------------------------------------------
function addMediaPostOldSchool(form_data)
{
	$.ajax({
		url: "http://www.trainzportal.com/",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "TRUE")
				window.location.replace("/mytrainz/index");	
			else
				window.location.replace("/mytrainz/add_media_post");						
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to upload media post. Member ID: "+member_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});		
}

// -------------------------------------------------------------------------
function followUser(member_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var form_data = "item_id="+member_id+"&item_type=USER";

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=64",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// fail
				$("#ajax_msg").html("Unable to follow user");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("User is now being followed");
				$(".toggle_followed_user_"+member_id).html("<a href=\"javascript:;\" onclick=\"unfollowUser('"+data.trim()+"')\">Unfollow</a>");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to follow user. Member ID: "+member_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFollowedItems(followed_items_limit, 0, false);
}

// -------------------------------------------------------------------------
function unfollowUser(member_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var form_data = "item_id="+member_id+"&item_type=USER";

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=65",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// fail
				$("#ajax_msg").html("Unable to unfollow user");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("User is no longer being followed");
				
				if (current_feed == "followed")
					$(".MytrainzFeedItemOwner_"+member_id).remove();
				else
					$(".toggle_followed_user_"+member_id).html("<a href=\"javascript:;\" onclick=\"followUser('"+data.trim()+"')\">Follow</a>");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to unfollow user. Member ID: "+member_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFollowedItems(followed_items_limit, 0, false);
}


// -----------------------------------------------------------
function followMedia(media_post_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var form_data = "item_id="+media_post_id+"&item_type=MEDIA_POST";

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=64",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// fail
				$("#ajax_msg").html("Unable to follow media post");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("Media Post is now being followed");
				
				$(".toggle_followed_media_"+media_post_id).html("<a href=\"javascript:;\" onclick=\"unfollowMedia('"+data.trim()+"')\"><img src=\"http://images.n3vgames.com/websites/trainzportal/TMC/follow.png\" class=\"FeedIcons\"></a>");
			}		
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to follow media post. Media Post ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFollowedItems(followed_items_limit, 0, false);
}

// ---------------------------------------------------------------
function unfollowMedia(media_post_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var form_data = "item_id="+media_post_id+"&item_type=MEDIA_POST";

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=65",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// fail
				$("#ajax_msg").html("Unable to unfollow media post");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("Media Post is no longer being followed");
				
				if (current_feed == "followed")
					$("#MytrainzFeedItem_"+media_post_id).remove();
				else
					$(".toggle_followed_media_"+media_post_id).html("<a href=\"javascript:;\" onclick=\"followMedia('"+data.trim()+"')\"><img src=\"http://images.n3vgames.com/websites/trainzportal/TMC/follow-off.png\" class=\"FeedIcons\"></a>");
				
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to unfollow media post. Member ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFollowedItems(followed_items_limit, 0, false);
}


// -------------------------
function addFavourite(media_post_id)
{
	var form_data = "media_post_id="+media_post_id;

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=57",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// media post failed to add - most likely invalid media post id
				$("#ajax_msg").html("Unable to add media post to favourites");						
			}
			else
			{
				// media post successfully added
				$("#ajax_msg").html("Media Post added to Favourites");
				$(".toggle_favourite_"+media_post_id).html('<a href="javascript:;" onclick="removeFavourite(\'+media_post_id+\')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/fav-on.png" class="FeedIcons" alt="Remove Favourite" title="Remove Favourite"></a>');
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to add media post to favourites. Media Post ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFavouriteMedia(favourite_media_limit, 0, false);
}

// -------------------------
function removeFavourite(media_post_id)
{
	var form_data = "media_post_id="+media_post_id;

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=58",
		type: "POST",
		data: form_data,
		success: function(data, textStatus, jqXHR)
		{
			// ajax call successful
			if (data == "FALSE")
			{
				// media post failed to remove (shouldn't really be able to get this)
				$("#ajax_msg").html("Unable to remove media post from favourites");						
			}
			else
			{
				// media post successfully removed
				$("#ajax_msg").html("Media Post removed from Favourites");
				
				if (current_feed == "favourites")
					$("#MytrainzFeedItem_"+media_post_id).remove();
				else
					$(".toggle_favourite_"+media_post_id).html('<a href="javascript:;" onclick="addFavourite(\'+media_post_id+\')"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/fav-off.png" class="FeedIcons" alt="Favourite" title="Favourite">');	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to remove media post from favourites. Media Post ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
	
	//getFavouriteMedia(favourite_media_limit, 0, false);
}



// --------------------------------------------------------------
function reportMedia(media_post_id)
{
	if (!checkUserLoggedIn())
		return;
		
	$("#reported_item_id").val(media_post_id);
	$("#report_item_div").css("display", "block");	
	$(".Blackout").css("display", "block");
}

// --------------------------------------------------------------
function reportComment(comment_id)
{
	if (!checkUserLoggedIn())
		return;
		
	$("#reported_comment_id").val(comment_id);
	$("#report_comment_div").css("display", "block");
	$(".Blackout").css("display", "block");
}

// -----------------------------------------------------------
function sendReportMedia()
{
	var media_post_id = $("#reported_item_id").val();
	var form_data = "item_id="+media_post_id+"&item_type=MEDIA_POST&report_type="+$("#reported_item_type").val()+"&comment="+encodeURIComponent($("#reported_item_comment").val());

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=66",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.reported_item_id == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to report media post");	
				displayMessages(data.messages);					
			}
			else
			{
				// successful
				$("#ajax_msg").html("Media Post reported");
				$(".toggle_reported_media_"+media_post_id).html("<img src=\"http://images.n3vgames.com/websites/trainzportal/TMC/report-on.png\" class=\"FeedIcons\">");
				$("#report_item_div").css("display", "none");	
				$(".Blackout").css("display", "none");
				displayMessages(data.messages);
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to report post. Media Post ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
}

// -----------------------------------------------------------
function sendReportComment()
{
	if (!checkUserLoggedIn())
		return;
		
	var comment_id = $("#reported_comment_id").val();
	var form_data = "item_id="+comment_id+"&item_type=COMMENT&report_type="+$("#reported_comment_type").val()+"&comment="+encodeURIComponent($("#reported_comment_comment").val());

	$.ajax({
		url: "http://www.trainzportal.com/?ACT=66",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.reported_item_id == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to report comment");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("Comment reported");
				$(".toggle_reported_comment_"+comment_id).html("| <font color=\"red\">Comment Reported</font>");
				$("#report_comment_div").css("display", "none");
				$(".Blackout").css("display", "none");
			}
				
			displayMessages(data.messages);
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to report comment. Comment ID: "+comment_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
}

// --------------------------------------------------------------
function deleteMediaPost(media_post_id)
{
	if (!checkUserLoggedIn())
		return; 
		
	if (!confirm("Are you sure you want to delete this media post?"))	
		return;
		
	var form_data = "media_post_id="+media_post_id;
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=74",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to delete media_post");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("Media post deleted");
				
				// remove the media post
				$('.media_post_data_'+media_post_id).html("Media post deleted");
				$("#MytrainzFeedItem_"+media_post_id).remove();
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to delete media post.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});				
}

// -------------------------------------------------------
function rateMediaPost(media_post_id, rating)
{ 
	var form_data = "media_post_id="+media_post_id+"&rating="+rating;
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=75",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			
			var data = JSON.parse(raw_data);
			var html = "";

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to rate media_post");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				if (data.rating > 0)
					html = html + '<a href="javascript:;" onclick="rateMediaPost(' + data.media_post_id + ', 0)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/up.png" class="FeedIcons" alt="Remove Vote" title="Remove Vote" ></a>';
				else
					html = html + '<a href="javascript:;" onclick="rateMediaPost(' + data.media_post_id + ', 1)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/up-off.png" class="FeedIcons" alt="Vote Up" title="Vote Up"></a>';		
				
				if (data.rating < 0)
					html = html + '<a href="javascript:;" onclick="rateMediaPost(' + data.media_post_id + ', 0)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/down.png" class="FeedIcons" alt="Remove Vote" title="Remove Vote"></a>';
				else
					html = html + '<a href="javascript:;" onclick="rateMediaPost(' + data.media_post_id + ', -1)"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/down-off.png" class="FeedIcons" alt="Vote Down" title="Vote Down"></a>';
					
				if (!data.overall_rating)
					data.overall_rating = "0";
					
				$("#over_all_rating_" + data.media_post_id).html(data.overall_rating);
				
				if (data.rating == 0)
					$("#user_rating_" + data.media_post_id).html("Not rated");
				else	
					$("#user_rating_" + data.media_post_id).html(data.rating);

				$("#user_rate_" + data.media_post_id).html(html);		
				$("#ajax_msg").html("Media post rated");	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to rate media post.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});				
}


// ------------------------------------------------------
function blacklistUser()
{
	if (!checkUserLoggedIn())
		return;
		
	if (!confirm("Are you sure you want to blacklist "+$("#blacklist_username").val()+" from posting comments and rating your media posts?"))
		return false;
	
	var form_data = "member_id="+$("#blacklist_member_id").val()+"&duration="+$("#blacklist_duration").val();
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=76",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to blacklist user");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("User blacklisted");
				$("#blacklist_user_form_div").hide();	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to blacklist user.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});					
}

// ---------------------------------------------------
function unblacklistUser(username, member_id)
{
	if (!checkUserLoggedIn())
		return;
		
	if (!confirm("Are you sure you want remove "+username+" from your blacklist?"))
		return false;
	
	var form_data = "member_id="+member_id;
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=77",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to remove user from blacklist");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("User removed from blacklist");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to remove user from blacklist.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});			
}


// -------------------------------------------------
function showBlacklistUserForm(username, member_id)
{
	if (!checkUserLoggedIn())
		return;
		
	$("#blacklist_username").val(username);
	$("#blacklist_member_id").val(member_id);
	$("#blacklist_user_form_div").show();		
}

// ------------------------------------------------------
function clearSearchCriteria()
{	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=78",
		type: "POST",
		data: false,
		success: function(raw_data, textStatus, jqXHR)
		{
			// nothing to do here
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// nothing to do here either
		}	
	});				
}

// ------------------------------------------------------
function clearMySearchCriteria()
{	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT={clear_my_search_criteria_action_id}",
		type: "POST",
		data: false,
		success: function(raw_data, textStatus, jqXHR)
		{
			// nothing to do here
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// nothing to do here either
		}	
	});				
}



</script>

<!-- End Core Scripts -->
<!-- Start Recent Activity Scripts -->
 
<script type="text/javascript">

var recent_activity_limit = 10;
var recent_activity_offset = 10;
var recent_activity_append = true;

// -------------------------------------------------------
// ACCEPTS: the limit and offset for the recent activity to get
//			append flag - true if appending, false if replacing
function getRecentActivity(append)
{
	var form_data;
	recent_activity_append = append;
	
	// get the next lot of recent activity 
	form_data = "limit="+recent_activity_limit+"&offset="+recent_activity_offset+"&requested_image_width=500&scaled_image_width=207&max_image_height=500";
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=60",
		type: "POST",
		data: form_data,
		dataType: "json",
		success: function(data, textStatus, jqXHR)
		{
			var content = [];
			
			// ajax call successful
			if (data == "FALSE")
			{
				// failed to get more recent activity
				$("#ajax_msg").html("Unable to get more recent activity");						
			}
			else
			{
				var items = "";
				
				// add the recent activity to the end of the recent activity list
				$.each(data.media_posts, function(key, value) {
					items = items + formatMediaPostContent(value);
				});
				
				if (recent_activity_append == true)
				{
					var $elems = $(items);	
					$container.append($elems).isotope('appended', $elems);
				}
				else
				{
					alert("Replace recent activity not implemented");
					//$("#recent_activity_summary_div").html(content);
				}
	
				// update the "get more" link
				if (data.is_more_recent_activity == "Y")
				{
					//recent_activity_limit = 3;
					is_more_recent_activity = true;
					recent_activity_offset = data.next_offset;
				}
				else
				{
					content = "[No more recent activity]";
					$("#get_more_recent_activity_summary_div").html(content);	
					is_more_recent_activity = false;
				}								

				// update ajax comment
				$("#ajax_msg").html("More recent activity added");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to get more recent activity | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
}

</script>

<!-- End Recent Activity Scripts -->
<!-- Start Favourites Scripts -->
 
<script type="text/javascript">

var favourite_media_limit = 10;
var favourite_media_offset = 10;
var favourite_media_append = true;

// -------------------------------------------------------
// ACCEPTS: the limit and offset for the favourite media to get
//			append flag - true if appending, false if replacing
function getFavouriteMedia(append)
{
	var form_data;
	
	// get the next lot off favourite media 
	form_data = "limit="+favourite_media_limit+"&offset="+favourite_media_offset+"&requested_image_width=500&scaled_image_width=207&max_image_height=500";
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=61",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var data = JSON.parse(raw_data);
			var content = [];
			
			// ajax call successful
			if (data == "FALSE")
			{
				// failed to get more recent activity
				$("#ajax_msg").html("Unable to get more favourite media");						
			}
			else
			{
				var items = "";
				
				// add the recent activity to the end of the recent activity list
				$.each(data.media_posts, function(key, value) {
					items = items + formatMediaPostContent(value);
				});
				
				if (append == true)
				{
					var $elems = $(items);	
					$container.append($elems).isotope('appended', $elems);
				}
				else
				{
					alert("Replace favourite media not implemented");
					//$("#recent_activity_summary_div").html(content);
				}
	
				// update the "get more" link
				if (data.is_more_favourite_media == "Y")
				{
					//recent_activity_limit = 3;
					is_more_favourite_media = true;
					favourite_media_offset = data.next_offset;
				}
				else
				{
					content = "[No more favourite media]";
					$("#get_more_favourite_media_summary_div").html(content);	
					is_more_favourite_media = false;
				}								

				// update ajax comment
				$("#ajax_msg").html("More favourite media added");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to get more favourite media | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
}

</script>

<!-- End Favourites Script -->
<!-- Start Followed Scripts -->
 
<script type="text/javascript">

var followed_items_limit = 10;
var followed_items_offset = 10;
var followed_items_append = true;

// -------------------------------------------------------
// ACCEPTS: the limit and offset for the followed items  to get
//			append flag - true if appending, false if replacing
function getFollowedItems(append)
{
	var form_data;
	
	// get the next lot of recent activity 
	form_data = "limit="+followed_items_limit+"&offset="+followed_items_offset+"&requested_image_width=500&scaled_image_width=207&max_image_height=500";
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=63",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var data = JSON.parse(raw_data);
			var content = [];
			
			// ajax call successful
			if (data == "FALSE")
			{
				// failed to get more recent activity
				$("#ajax_msg").html("Unable to get more followed media");						
			}
			else
			{
				var items = "";
				
				// add the recent activity to the end of the recent activity list
				$.each(data.followed_items, function(key, value) {
					items = items + formatMediaPostContent(value);
				});
				
				if (append == true)
				{
					var $elems = $(items);	
					$container.append($elems).isotope('appended', $elems);
				}
				else
				{
					alert("Replace followed media not implemented");
					//$("#recent_activity_summary_div").html(content);
				}
	
				// update the "get more" link
				if (data.is_more_followed_items == "Y")
				{
					//recent_activity_limit = 3;
					is_more_followed_media = true;
					followed_items_offset = data.next_offset;
				}
				else
				{
					content = "[No more followed media]";
					$("#get_more_followed_media_summary_div").html(content);	
					is_more_followed_media = false;
				}								

				// update ajax comment
				$("#ajax_msg").html("More followed media added");
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to get more followed media | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});	
}


</script>

<!-- End Followed Scripts -->
<!-- Start Media Post Scripts -->
 
<script type="text/javascript">

// --------------------------------------
function updateMyMediaPost(media_post_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var form_data = "media_post_id="+media_post_id+"&caption="+encodeURIComponent($("#my_media_post_caption").val())+"&tags="+encodeURIComponent($("#my_media_post_tags").val());
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=68",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to update media post caption");						
			}
			else
			{
				// successful
				$("#ajax_msg").html("Media post caption updated");	
			}
				
			displayMessages(data.messages);
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to update media post caption. Media Post ID: "+media_post_id+" | ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});			
}

// --------------------------------------------
function getMediaPostComments(item_id, limit, offset, replace_comments)
{
	replace_comments = typeof replace_comments !== 'undefined' ? replace_comments : false;
	var form_data = "item_type=MEDIA_POST&item_id="+item_id+"&limit="+limit+"&offset="+offset;
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=69",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to get comments");
				displayMessages(data.messages);						
			}
			else
			{
				// successful
				var html = "";
				var edit_html = "";
				var comment_html = "";
				
			 
				for (i = 0; i < data.comments.length; i++)
				{
					// can the user edit?
					if (isUserLoggedIn() && data.comments[i].can_user_edit == "Y")
					{
						edit_html = ' <span id="edit_comment_'+data.comments[i].comment_id+'"><a href="javascript:;" onclick="editMediaPostComment('+data.comments[i].comment_id+')">Edit</a></span>';
						comment_html = '<span id="comment_'+data.comments[i].comment_id+'">' + data.comments[i].comment + '</span>';
					}
					else
					{
						edit_html = '';
						comment_html = data.comments[i].comment;
					}

					// can the user delete?
					if (isUserLoggedIn() && data.comments[i].can_user_delete == "Y")
						delete_html = ' <a href="javascript:;" onclick="deleteMediaPostComment('+data.comments[i].comment_id+')">Delete</a></span>';
					else
						delete_html = '';

					//Work out first pipe
					if (data.comments[i].can_user_edit == "Y" && data.comments[i].can_user_delete == "Y")
					{
						pipe_html = ' | ';
					}
					else
					{
						pipe_html = '';
					}

					
						
					html = html + "<div id=\"comment_"+data.comments[i].comment_id+"_div\" class=\"CommentContainer\">";
					html = html + "<div class=\"CommentProfilePic\"><img src=\"http://images.n3vgames.com/websites/trainzportal/TMC/nopic.png\"></div>";
					html = html + "<div class=\"CommentHeading\">";
					html = html + "<div class=\"CommentUser\"><a href=\"#\">" + data.comments[i].username  + "</a></div>";
					html = html + "<div class=\"CommentPosted\">" + data.comments[i].date_created + "</div>";
					html = html + "</div>";
					html = html + "<div class=\"CommentOptions\">";
					html = html + edit_html + pipe_html + delete_html;
					html = html + "<span class=\"toggle_reported_comment_"+data.comments[i].comment_id+"\">";
					
					// can the user report the comment
					if (isUserLoggedIn() && data.comments[i].can_user_report == "Y" )
					{
						if (data.comments[i].is_comment_reported == "N")
							html = html + " | <a href=\"javascript:;\" onclick=\"reportComment('"+data.comments[i].comment_id+"')\">Report Comment</a>";
						else if (data.comments[i].is_comment_reported == "Y")
							html = html + " <font color=\"red\">Comment Reported</font>";
					}
					
					// can this user blacklist the user that posted the comment?
					if (data.comments[i].blacklist == "N")
						html = html + " | <a href=\"javascript:;\" onclick=\"showBlacklistUserForm('"+data.comments[i].username+"', '"+data.comments[i].member_id+"')\">Blacklist User</a>";	
					else if (data.comments[i].blacklist != "NA")
						html = html + " <font color=\"red\">User Blacklisted "+data.comments[i].blacklist+" - <a href=\"javascript:;\" onclick=\"unblacklistUser('"+data.comments[i].username+"', '"+data.comments[i].member_id+"')\">Unblacklist User</a></font>";
						
					html = html + "</span>";
					
					html = html + "</div>";
					
					html = html + "<div style=\"clear:both\"></div>";
					html = html + "<div class=\"CommentText\">" + comment_html + "</div>";
					html = html + "<div style=\"clear:both\"></div>";
					html = html + "</div>\n";								
				}
				
				if (replace_comments)
					$("#media_post_comments_div").html(html);
				else
					$("#media_post_comments_div").append(html);
				
				if (data.is_more_comments == "Y")
					html = '<a href="javascript:;" onclick="getMediaPostComments('+item_id+', '+limit+', '+data.next_offset+')">Get more comments</a>';
				else
					html = "No more comments";
					
				$("#get_more_media_post_comments_div").html(html);	
				$("#ajax_msg").html("Comments updated");		
			}
				
			displayMessages(data.messages);
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to get media post comments.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});			
}

// ---------------------------------------------------------------------
function addMediaPostComment(item_id, comment, input_id)
{
	if (!checkUserLoggedIn())
		return;
		
	comment = $.trim(comment);
	
	if (!comment)
	{
		$("#general_messages").html('<font color="red">Comment Required</font>');
		return;	
	}
	
	var form_data = "item_type=MEDIA_POST&item_id="+item_id+"&comment="+encodeURIComponent(comment);
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=71",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to add comment");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("Media Post Comment added");
				
				// get all media post comments
				//$("#media_post_comments_div").html("");
				getMediaPostComments(item_id, 0, 0, true);
				$("#"+input_id).val("");	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to add media post comment.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});			
}

// -----------------------------------------------------------------------
function editMediaPostComment(comment_id)
{
	if (!checkUserLoggedIn())
		return;
		
	var comment;
	var html;
	
	if (edit_comment_id != 0)
		cancelUpdateMediaPostComment(edit_comment_id);
	
	comment = $('#comment_'+comment_id).html();
	html = '<textarea class="UpdateComment" id="update_comment_'+comment_id+'">'+comment+'</textarea> ';
	html = html + '<input class="CommentButton" type="button" value="Update Comment" onclick="updateMediaPostComment('+comment_id+', $(\'#update_comment_'+comment_id+'\').val());"/>';
	html = html + '<input class="CommentButton" type="button" value="Cancel" onclick="cancelUpdateMediaPostComment('+comment_id+')"/>';
	html = html + '<span id="orig_comment_'+comment_id+'" style="display:none;">'+comment+'</span>';
	$('#comment_'+comment_id).html(html);
	$('#edit_comment_'+comment_id).hide();
	edit_comment_id = comment_id;
}

// ------------------------------------------------------------------------------
function cancelUpdateMediaPostComment(comment_id)
{
	var comment = $('#orig_comment_'+comment_id).html();
	$('#comment_'+comment_id).html(comment);
	$('#edit_comment_'+comment_id).show();	
	
	if (comment_id == edit_comment_id)
		edit_comment_id = 0;
}

// ------------------------------------------------------------------------------
function updateMediaPostComment(comment_id, comment)
{
	if (!checkUserLoggedIn())
		return;
		
	comment = $.trim(comment);
	
	if (!comment)
	{
		$("#general_messages").html('<font color="red">Updated comment required</font>');
		return;	
	}
	
	var form_data = "comment_id="+comment_id+"&comment="+encodeURIComponent(comment);
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=72",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to update comment");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("Comment updated");
				
				// replace the comment with the new one
				$('#comment_'+data.comment_id).html(data.comment);
				$('#edit_comment_'+data.comment_id).show();	
	
				if (data.comment_id == edit_comment_id)
					edit_comment_id = 0;	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to edit comment.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});						
}

// ------------------------------------------------------------
function deleteMediaPostComment(comment_id)
{
	if (!checkUserLoggedIn())
		return;
		
	if (!confirm("Are you sure you want to delete this comment?"))	
		return;
		
	var form_data = "comment_id="+comment_id;
	
	$.ajax({
		url: "http://www.trainzportal.com/?ACT=73",
		type: "POST",
		data: form_data,
		success: function(raw_data, textStatus, jqXHR)
		{
			var i;
			var data = JSON.parse(raw_data);

			// ajax call successful
			if (data.status == 0)
			{
				// fail
				$("#ajax_msg").html("Unable to delete comment");
				displayMessages(data.messages);						
			}
			else
			{
				// successful	
				$("#ajax_msg").html("Comment deleted");
				
				// remove the comment
				$('#comment_'+data.comment_id+'_div').remove();
	
				if (comment_id == edit_comment_id)
					edit_comment_id = 0;	
			}
		},
		error: function(jqXHR, textStatus, errorThrown)
		{
			// ajax call failed
			$("#ajax_msg").html("Unable to delete comment.| ERROR: Error="+errorThrown+" | status="+textStatus);
		}	
	});		
}

</script>

<!-- End Media Post Scripts -->
<!-- End TMC Header -->
</head>
<body>

<!-- Background Image -->


				<style>
					body{
						background:#eee url('https://images.n3vgames.com/newadverts/6-4fa67a3523b3a45c7df8929350689d17-e2542d522979b432c9c64fb3ecc0e3d7.jpg') no-repeat fixed center top !important;
					}
					
					.bgadclickleftfull{
						position:fixed;
							left:50%;
							margin-left:-1500px;
							width:1000px;
							height:100%;
						}
					.bgadclickrightfull{
							position:fixed;
							left:50%;
							margin-left:500px;
							width:1000px;
							height:100%;
						}
				</style>
				
				<a href="http://track.n3vgames.com/track.php?ID=e2542d522979b432c9c64fb3ecc0e3d7" class="bgadclickleftfull" target="_blank"></a>
				<a href="http://track.n3vgames.com/track.php?ID=e2542d522979b432c9c64fb3ecc0e3d7" class="bgadclickrightfull" target="_blank"></a>
				



<!-- Main Menu -->
<div id="TopBar">
	<div class="Content">
					<a href="http://www.trainzportal.com/mytrainz/index">Go to Gallery</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
			<a href="https://www.auran.com/planetauran/register.php" target="_blank">Register for MyTrainz</a> | 
			<a href="https://www.auran.com/planetauran/login.php">Login to MyTrainz</a>
			<!-- <a href="/mytrainz_account/login">Login to MyTrainz</a> -->
			</div>
</div>

<div id="Header">
	<div id="HeaderContent">
		<div id="Logo">
							<a href="/"><img src="http://images.n3vgames.com/websites/trainzportal/theme/portal_logo.png" /></a>
					</div>
		<div id="LoginButton" style="position:absolute;right: 18px;top: 28px;">

		
		
		
		<!-- Begin MailChimp Signup Form -->
		
		<div id="mc_embed_signup" style="margin-right: 20px;color:white;">
		<form action="//n3vgames.us5.list-manage.com/subscribe/post?u=59d7ec76800a28ab7fa87e456&amp;id=463d5db52a" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
		<!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			<div style="position: absolute; left: -5000px;"><input type="text" name="b_59d7ec76800a28ab7fa87e456_463d5db52a" tabindex="-1" value=""></div>
		<!--end -->
		<div id="mc_embed_signup_scroll">
			<h2>Subscribe to the Trainz Newsletter</h2>
			<div class="mc-field-group input-group" style="display:none;">
				<strong>Newsletters </strong>
				<ul>
					<li><input type="checkbox" value="1" name="group[15189][1]" id="mce-group[15189]-15189-0" CHECKED><label for="mce-group[15189]-15189-0">Trainz Newsletter</label></li>
					<li><input type="checkbox" value="2" name="group[15189][2]" id="mce-group[15189]-15189-1"><label for="mce-group[15189]-15189-1">Simulator Central Newsletter</label></li>
					<li><input type="checkbox" value="8" name="group[15189][8]" id="mce-group[15189]-15189-2"><label for="mce-group[15189]-15189-2">Simulator Central New Releases</label></li>
					<li><input type="checkbox" value="4" name="group[15189][4]" id="mce-group[15189]-15189-3"><label for="mce-group[15189]-15189-3">N3V Games News and Information</label></li>
				</ul>
			</div>
			<div class="mc-field-group" style="float;left">
				<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address" style="padding: 5px;border-radius: 5px 0 0 5px;border: 0px;width: 215px;">
				<input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" style="border: 0;padding: 5px 10px;border-radius: 0px 5px 5px 0px;">
			</div>
			<div id="mce-responses" class="clear">
				<div class="response" id="mce-error-response" style="display:none"></div>
				<div class="response" id="mce-success-response" style="display:none"></div>
			</div>    
			
		</div>
		</form>
		</div>

		<!--End mc_embed_signup-->
		
		



		<!-- <a href="/mytrainz/"><img src="http://images.n3vgames.com/websites/trainzportal/TMC/GoGallery.png" /> -->

		</div>
	</div>
</div>

<div style="margin:auto;position:relative;width:990px;margin-top:-28px;">
	<ul id="menu">
		
                <li class="top right">
			<a href="/product">
				Products
			</a>
			<div class="DropdownProducts MenuDropdown">
        			<div class="col4">
					<div class="Heading">PC - <a href="/product/pc" style="display:inline;">View All</a></div>
					<ul>
					
					<li><a href="/product/view/trainz-simulator-a-new-era">Trainz: A New Era SP1</a></li>
					<li><a href="http://www.simulatorcentral.com/index.php/trainz-driver-2016-pc-digital.html">Trainz Driver 2016</a></li>
					<li><a href="/product/view/trainz_simulator_12">Trainz Simulator 12</a></li>
					<li><a href="/product/view/trainz-simulator-2010-engineers-edition">Trainz Simulator 2010</a></li>
					<li><a href="/product/view/trainz-simulator-2009-world-builder-edition-digital">Trainz Simulator 2009</a></li>
					<li><a href="/product/view/my-first-trainz-set">My First TRAINZ Set</a></li>
					</ul>
				</div>
				<div class="col4">
					<div class="Heading">Mac - <a href="/product/mac" style="display:inline;">View All</a></div>
					<ul>
					<li><a href="/product/view/trainz-simulator-a-new-era">Trainz: A New Era SP1</a></li>
					<li><a href="/product/view/trainz-simulator-2-mac">Trainz Simulator 2 Mac</a></li>
					<li><a href="/product/view/trainz-simulator-mac">Trainz Simulator Mac</a></li>
					</ul>
					<div class="Heading">First Class Tickets</div>
					<ul>
					<li><a href="/product/view/first-class-ticket-fct">First Class Tickets</a></li>
					</ul>
				</div>
				<div class="col4">
					<div class="Heading">Mobile - <a href="/product/mobile" style="display:inline;">View All</a></div>
					<ul>
					<li><a href="/product/view/trainz-driver-journeys">Train Driver Journeys</a></li>
					<li><a href="/product/view/trainz-driver-2">Trainz Driver 2</a></li>
					<li><a href="/product/view/trainz-simulator-2-ipad">Trainz Simulator 2</a></li>
					<li><a href="/product/view/train-town">Train Town</a></li>
					<li><a href="/product/view/trainz-driver-for-mobile-phones">Trainz Driver</a></li>
					<li><a href="/product/view/trainz-trouble-pc-ios-android">Trainz Trouble</a></li>
					</ul>
	
				</div>
				<div class="col4 FeatureBG">

					
						
							<a href="http://www.trainzgetonboard.com/"><img src="http://www.trainzportal.com/images/uploads/menu_features/TrainzPortal-Product-Menu.jpg" alt="" class="DropdownFeatureImage" /></a>
						
							<a href="http://www.simulatorcentral.com/index.php/trainz-driver-2016-pc-digital.html"><img src="http://www.trainzportal.com/images/uploads/menu_features/TD2016.png" alt="" class="DropdownFeatureImage" /></a>
						
					

				</div>
				<div class="clear"></div>
				
        		<div>
		</li>
                <li class="top right left">
			<a href="/news">
				Trainz News
			</a>
		</li>
                <li class="top right left">
			<a href="http://forums.auran.com/trainz/index.php" target="_blank">
				Trainz Community
			</a>
			<div class="DropdownCommunity MenuDropdown">
        			<div class="col3">
					<div class="Heading">Trainz Forum</div>
					<div class="MenuText">
					Chat with your fellow Trainz enthusiasts and join the ever growing community at our forums.
					<br /><br />
					Get tips for how to make your Trainz experience better, join content creators around the globe and gain access to a vast pool of information.
					</div>
					<a href="http://forums.auran.com/trainz/index.php" target="_blank">
						<div class="MenuButton">
							Visit Forums
						</div>
					</a>
				</div>
				<div class="col3">
					<div class="Heading">Trainz Gallery</div>
					<div class="MenuText">
					post your Trainz and Train related images to share with the community.
					<br /><br />
					Login to Trainz Gallery and follow, vote and favourite some of the best trains content from the Trainz community.
					<br /><br /><br />
					</div>
					<a href="/mytrainz/">
						<div class="MenuButton">
							Trainz Gallery
						</div>
					</a>
				</div>
				<div class="col3 FeatureBG">

					
						
							<a href="http://www.trainzgetonboard.com/"><img src="http://www.trainzportal.com/images/uploads/menu_features/TrainzPortal-Product-Menu.jpg" alt="" class="DropdownFeatureImage" /></a>
						
							<a href="http://www.simulatorcentral.com/index.php/trainz-driver-2016-pc-digital.html"><img src="http://www.trainzportal.com/images/uploads/menu_features/TD2016.png" alt="" class="DropdownFeatureImage" /></a>
						
					

				</div>
				<div class="clear"></div>
			</div>
		</li>
                <li class="top right left">
			<a href="http://dls.trainzportal.com/" target="_blank">
				Download Station
			</a>
		</li>
               	<li class="top right left">
			<a href="http://www.simulatorcentral.com" target="_blank">
				Simulator Central
			</a>
		</li>
                <li class="top left">
			<a href="http://support.trainzportal.com" target="_blank">
				Trainz Support
			</a>
		</li>
        </ul>
</div>

<div style="clear:both;"></div>

<!-- 

-->


<div id="MainContainer">



<div class="Content">


	
	<div class="Pages">

	<br />

	<h1>Privacy Policy</h1>

	<p>This privacy policy sets out how&nbsp;<a href="http://www.trainzportal.com">www.trainzportal.com</a>, <a href="http://www.n3vgames.com">www.n3vgames.com</a>, and its software applications, referred to hereafter as Trainz Portal and operated by N3V Games ABN: 43-118-743-534, uses and protects any information that you give Trainz Portal when you use it&#39;s Services. Trainz Portal is committed to ensuring that your privacy is protected. Should we ask you to provide certain information by which you can be identified when using this website, and you can be assured that it will only be used in accordance with this privacy statement. Trainz Portal may change this policy from time to time by updating this page. You should check this page from time to time to ensure that you are happy with any changes.</p>

<h3>What We Collect</h3>

<p>During the course of business, we may collect the following information to ensure distribution of your purchased goods.</p>

<ul>
	<li>Your Full Name</li>
	<li>Contact Information</li>
	<li>Email Address</li>
	<li>Demographic Information, such as Postcode, Preferences or Interests</li>
	<li>Other information relevant to customer surveys and/or offers</li>
</ul>

<h3>What We Do With Your Information</h3>

<p>We require this information to understand your needs and provide you with a better service, and in particular for the following reasons:</p>

<ul>
	<li>Internal record keeping in accordance with local sales legislation.</li>
	<li>We may use the information to improve our products and services.</li>
	<li>We may periodically send promotional emails about new products, special offers or other information which we think you may find interesting using the email address provided upon registration.</li>
	<li>From time to time, we may also use your information to contact you for market research purposes. Your opinions are important to us and we&rsquo;re always looking for ways to improve our services offered.</li>
</ul>

<h3>Security</h3>

<p>We are committed to ensuring that your information is secure. In order to prevent unauthorised access or disclosure, we have put in place suitable physical, electronic and managerial procedures to safeguard and secure the information we collect online.</p>

<h3>How We Use Cookies</h3>

<p>A cookie is a small file which asks permission to be placed on your computer&rsquo;s hard drive. Once you agree, the file is added and the cookie helps analyse web traffic or lets you know when you visit a particular site. Cookies allow web applications to respond to you as an individual. The web application can tailor its operations to your needs, likes and dislikes by gathering and remembering information about your preferences.</p>

<p>We use traffic log cookies to identify which pages are being used. This helps us analyse data about web page traffic and improve our website in order to tailor it to customer needs. We only use this information for statistical analysis purposes and then the data is removed from the system.</p>

<p>Overall, cookies help us provide you with a better website, by enabling us to monitor which pages you find useful and which you do not. A cookie in no way gives us access to your computer or any information about you, other than the data you choose to share with us. You can choose to accept or decline cookies. Most web browsers automatically accept cookies, but you can usually modify your browser setting to decline cookies if you prefer. However, this may prevent you from tracking full advantage of Simulator Central and its offers.</p>

<h3>Links to External Websites</h3>

<p>From time to time, our website may contain links to external websites. However, once you have used these links to leave our site, you should note that we do not have any control over that other website. Therefore, we cannot be held responsible for the protection and privacy of any information which you provide whilst visiting such site, and such sites are not governed by this privacy statement. You should exercise caution and consult the privacy policy applicable to the website in question.</p>

<h3>Controlling Your Personal Information</h3>

<p>You may choose to restrict the collection or use of your personal information in the following ways:</p>

<ul>
	<li>If you have previously agreed to us using your personal information for direct marketing purposes, you may change your preference at any time and can opt out by following the unsubscribe link in all marketing email correspondence from Trainz Portal. Alternatively you can contact us via our Contact Form under Support, and express your concerns.</li>
</ul>

<p>We will not sell, distribute or lease your personal information to third parties unless we have your permission, or are required by law to do so. We may use your personal information to send you promotional information about third parties which we think you may find relevant to your indicated interests.</p>

<p>Requests for details about stored information are handled under Australian Legislative Law, relevant to local state in which Trainz Portal is based.</p>

<p>If you believe that any information we are holding on you is incorrect or incomplete, please contact us as soon as possible, via our submission forms. We will promptly correct any information found to be incorrect.</p>

	</div>



<!-- End MainContainer and Content -->
</div>
</div>

<div id="Footer">

	<div id="FooterContent">

	<div class="Title">
		Quick Links
	</div>

		<div class="Col">
			<li><a href="/product/view/trainz-simulator-a-new-era">Trainz: A New Era</a></li>
			<li><a href="/product/view/trainz-simulator-2-mac">Trainz Simulator 2 Mac</a></li>
			<li><a href="/product/view/trainz-driver-2">Trainz Driver 2 (for Mobile)</a></li>
			<li><a href="/product/view/trainz-simulator-2-ipad">Trainz Simulator 2 iPad</a></li>
		</div>

		<div class="Col">
			<li><a href="http://www.simulatorcentral.com/index.php/trainz/first-class-tickets.html" target="_blank">Buy First Class Tickets</a></li>
			<li><a href="http://dls.trainzportal.com/" target="_blank">Trainz Download Station</a></li>
			<li><a href="http://forums.auran.com/trainz/index.php" target="_blank">Trainz Forums</a></li>
			<li><a href="http://www.simulatorcentral.com" target="_blank">Simulator Central</a></li>
		</div>

		<div class="Col">
			<li><a href="/pages/terms-of-service">Terms of Service</a></li>
			<li><a href="/pages/privacy-policy">Privacy Policy</a></li>
			<li><a href="/pages/trainz-community-guidelines">Community Guidelines</a></li>
			<li><a href="https://support.trainzportal.com" target="_blank">Customer Support</a></li>
		</div>
	</div>
	<div class="Clear"></div>

</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52252331-1', 'auto');
  ga('send', 'pageview');
</script>