<esi:remove>
<!--
--- CUSTOMIZATION INSTRUCTIONS ---

This page is shared by both POST and GET requests. It is possible to present
different content for POST and GET requests and it is also present visually
same page to both types of requests.

POST page has a hidden HTML form tag that preserves the original customer POST.

To customize this page so that both version look the same, edit sections that
marked as CUSTOMIZE HEAD HERE or CUSTOMIZE BODY HERE.
-->
</esi:remove>

<!--<esi:vars>$add_cachebusting_header()</esi:vars>-->

<esi:comment text=" ------------- begin html ---------- "/>
<html>
<!doctype html>
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<esi:comment text=" --- CUSTOMIZE HEAD HERE --- "/>

  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Hang Tight! Routing to checkout...</title>
	<meta name="viewport" content="width=device-width,initial-scale=1">
  <script type="text/javascript" language="JavaScript" src="http://media.patagonia.com/SPA/spawaitingroom/javascript/spin.min.js"></script>

<style type="text/css">
    body {
        margin-left: 0px;
        margin-top: 0px;
        margin-bottom: 0px;
        margin-right: 0px;
        background-color: #ffffff;
        font-family: 'AvenirNextLTW02-Medium', Helvetica, Arial, Verdana, sans-serif;
        color: #000000;
        font-size: 100%;
        background: url("images/sitedown_background.jpg") no-repeat left center fixed; 
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }
    .top-logo {
        top: 0;
        left: 0;
        width: 100%;
        height: 100px;
        background-color: red;
        padding-top: 20px;
        height: 41px;
        background-color: white;
        background-color: rgba(255, 255, 255, 0.9);
    }
    .top-logo img {
        width: 137px;
        padding-left: 67px;
    }
    .textholder-wrapper {
        position: relative;
        height: 100%;
        width: 100%;
    }
    .textholder {
        background-color: rgba(255, 255, 255, 0.8);
        width: 46%;
        padding: 30px;
        text-align: center;
        color: #020202;
        font-size: 13px;
        line-height: 19px;
        transform: translate(0%, 11%);
        left: 39%;
        position: absolute;
    }
    h2 {
        font-family: 'Avenir Next LT W02 Bold', Helvetica, Arial, Verdana, sans-serif;
        font-size: 23px;
        letter-spacing: 1.5px;
    }
    h3 {
        font-size: 14px;
        clear: both;
        font-family:'Avenir Next W02 Light', Helvetica, Arial, Verdana, sans-serif;
        padding: 0 10px;
    }
    table {
        width: 100%;
    }
    .line {
        position: relative;
        width: 50%;
    }
    .line:before {
        content: "";
        background-color: rgba(0,0,0,0.3);
        height: 1px;
        width: 100%;
        position: absolute;
        left: 0;
        top: 24px;
    }
    p {
        font-size: 14px;
        letter-spacing: 0.2px;
        font-family:'Avenir Next W02 Light', Helvetica, Arial, Verdana, sans-serif;
        margin-top: 0;
    }
    p a:link {
        text-decoration: none;
        color: black;
        font-weight: bold;
        font-family: Helvetica;
    }
    .eu-phones {
        float: left;
        width: 33%;
        text-align: left;
        padding-bottom: 18px;
    }
    .photo-credit {
        position: absolute;
        width: 100%;
        bottom: 0;
        left: 0;
        font-size: 10px;
    }

    @media (max-width:1200px) {
        .textholder {
            width: 60%;
            left: 28%;
        }
    }

    @media (max-width:900px) {
        .textholder {
            transform: translate(0%, 4%);
        }
    }

    @media (max-width:800px) {
        .textholder {
            width: 80%;
            left: 6%;
            transform: translate(0,0);
            top: 35px;
        }
    }
    @media (max-width:550px) {
        .textholder {
            transform: translate(0, 0);
            left: 2%;
            width: 85%;
            padding: 5%;
            margin-bottom: 35px;
        }
        .eu-phones {
            margin-left: 10%;
            width: 65%;
            float: none;
            padding-bottom: 0;
        }
    }
</style>





<esi:comment text=" --- STOP CUSTOMIZE HEAD HERE --- "/>

<esi:comment text=" --------------- header ------------ "/>
<esi:choose>

  <esi:when test="$(REQUEST_METHOD)=='GET'">
  <esi:comment text=" AKAMAI-UPA: GET WR page "/>
  <META HTTP-EQUIV="Refresh" CONTENT="30;URL=$(original_url)">
  <esi:comment text=" css, javascript goes here "/>

</head>
<body>

   </esi:when>
   <esi:otherwise>

  <esi:comment text=" AKAMAI-UPA: POST WR page "/>
  <esi:comment text=" css, javascript goes here "/>

</head>
<body onLoad="submitWait();true;">

   </esi:otherwise>
</esi:choose>

<esi:comment text=" --- end header & start body -- part below is shared by GET and POST requests --- "/>

<esi:comment text=" --- end shared body & start protocol specific body --- "/>

<esi:choose>
   <esi:when test="$(REQUEST_METHOD)=='GET'">

<esi:comment text=" ---------------------- GET SPECIFIC BODY ----------------------- "/>

   </esi:when>
   <esi:otherwise>

<esi:comment text=" ---------------------- POST SPECIFIC BODY ----------------------- "/>
<esi:comment text=" -- post body is more complex, as all data has to be replicated -- "/>

<esi:vars>
<form id="wr" name="waitroomform" action="$(original_url)" method="POST">
</esi:vars>
<esi:comment text=" -- Luhn Validation must be used to remove sensitive PCI data before storing POST body in hidden field -- "/>
<esi:function name="reverse">
	<esi:assign name="result" value="''"/>
	<esi:foreach item="CHAR" collection="$(ARGS{0})">
		<esi:choose>
			<esi:when test="$(CHAR_start)">
				<esi:assign name="result" value="$(CHAR)"/>
			</esi:when>
			<esi:otherwise>
				<esi:assign name="result" value="$(CHAR)+$str($(result))"/>
			</esi:otherwise>
		</esi:choose>
	</esi:foreach>
	<esi:return value="$(result)"/>
</esi:function>
<esi:function name="luhn">
	<esi:assign name="reversed_cc" value="$reverse($(ARGS{0}))"/>	
	<esi:assign name="sum" value="0"/>
	<esi:assign name="sumArray" value="[0, 2, 4, 6, 8, 1, 3, 5, 7, 9]"/>
	<esi:foreach item="CC_DIGIT" collection="$(reversed_cc)">
		<esi:choose>
			<esi:when test="$(CC_DIGIT_start)">
				<esi:assign name="sum" value="$int($(CC_DIGIT))"/>
			</esi:when>
			<esi:when test="$(CC_DIGIT_odd)">
				<esi:assign name="sum" value="$int($(CC_DIGIT))+$int($(sum))"/>
			</esi:when>
			<esi:otherwise>
				<esi:assign name="sum" value="$int($(sumArray{$int($(CC_DIGIT))}))+$int($(sum))"/>
			</esi:otherwise>
		</esi:choose>
	</esi:foreach>
	<esi:choose>
		<esi:when test="$(sum)>0 && $(sum)%10==0">
			<esi:return value="'true'"/>
		</esi:when>
		<esi:otherwise>
			<esi:return value="'false'"/>
		</esi:otherwise>
	</esi:choose>
</esi:function>
<esi:foreach item="NAMEVALUE" collection="$(POST)">
   <esi:choose>
       <esi:when test="$(NAMEVALUE{0})=='submit'">
          <!-- skipping submit -->
       </esi:when>
       <esi:when test="$(NAMEVALUE{1}) matches '''^\[\'.*?\'\]'''">
          <esi:foreach item="MULTIVAL" collection="$(NAMEVALUE{1})">
			  <esi:assign name="IS_CC" value="'false'"/>
			  <esi:assign name="FIELD_VALUE" value="$replace($replace($(MULTIVAL), ' ', ''), '-', '')"/>
			  <esi:choose>
				<esi:when test="($(FIELD_VALUE) matches '''^\d{13,16}$''' && $(QUERY_STRING{LUHN_ALGORIHTM_MODE})!='0')">
					<esi:assign name="IS_CC" value="$luhn($(FIELD_VALUE))"/>
				</esi:when>
			  </esi:choose>
		      <esi:choose>
				<esi:when test="$(IS_CC)=='true'">
					<input type="hidden" name="$(NAMEVALUE{0})" value="''">
				</esi:when>
				<esi:otherwise>
					<input type="hidden" name="$(NAMEVALUE{0})" value="$(MULTIVAL)">
				</esi:otherwise>
		      </esi:choose>
          </esi:foreach>
       </esi:when>
       <esi:otherwise>
		  <esi:assign name="IS_CC" value="'false'"/>
		  <esi:assign name="FIELD_VALUE" value="$replace($replace($str($(NAMEVALUE{1})), ' ', ''), '-', '')"/>
		  <esi:choose>
			<esi:when test="($(FIELD_VALUE) matches '''^\d{13,16}$''' && $(QUERY_STRING{LUHN_ALGORIHTM_MODE})!='0')">
				<esi:assign name="IS_CC" value="$luhn($(FIELD_VALUE))"/>
			</esi:when>
		  </esi:choose>
		  <esi:choose>
			<esi:when test="$(IS_CC)=='true'">
				<input type="hidden" name="$(NAMEVALUE{0})" value="''">
			</esi:when>
			<esi:otherwise>
				<input type="hidden" name="$(NAMEVALUE{0})" value="$(NAMEVALUE{1})">
			</esi:otherwise>
		  </esi:choose>
       </esi:otherwise>
    </esi:choose>
</esi:foreach>
<esi:choose>
  <esi:when test="$int($(POST{'__wr'})) != 1">
      <input type="hidden" name="__wr" value="1">
  </esi:when>
</esi:choose>
</form>
<SCRIPT language="JavaScript">
   function submitWait() {
     setTimeout('submitForm()',30000);
     return(true);
   }
   function submitForm() {
     document.waitroomform.submit();
   }
</SCRIPT>

   </esi:otherwise>
</esi:choose>

<esi:comment text=" ---------------------- END PROTOCOL-SPECIFIC BODY ----------------------- "/>

<esi:comment text=" --- content below is shown for both GET and POST requests --- "/>


<esi:comment text=" --- CUSTOMIZE BODY HERE --- "/>

    <div class="top-logo">
        <a href="http://www.patagonia.com"><img src="images/patagonia-logo.png" alt="Patagonia logo" /></a>
    </div>
    <div class="textholder-wrapper">
        <div class="textholder">
            <h2>Sit tight</h2>
            <p>We’ve got our hands full at the moment but we should be up and moving shortly.<br />This page will automatically refresh and bring you into the website as soon as we can handle it.</p>
            <table>
                <tr>
                    <td class="line">&nbsp;</td>
                    <td><h3><span>U.S.&nbsp;&amp;&nbsp;CANADA</span></h3></td>
                    <td class="line">&nbsp;</td>
                </tr>
            </table>
            <p>If you live in the United States or Canada and need to contact us immediately, please call <strong>1.800.638.6464</strong> or email <a href="mailto:customer_service@patagonia.com?subject=18.4f94dc17.1496596522.42e053a5">customer_service@patagonia.com</a>.</p>
            <table>
                <tr>
                    <td class="line">&nbsp;</td>
                    <td><h3><span>EUROPE</span></h3></td>
                    <td class="line">&nbsp;</td>
                </tr>
            </table>
            
            <p>European customers can email <a href="mailto:directsales.europe@patagonia.com">directsales.europe@patagonia.com</a> or reach us by phone.</p>
            <div class="eu-phones">
                Austria : 0800 100 418<br />Belgium : 0800 58 048<br />Denmark : 804 04 938<br />France : 0805 98 0012
            </div>
            <div class="eu-phones">
                Germany : 0800 000 1156<br />Ireland : 1800 818 108<br />Italy : 800 905 673<br />Luxembourg : 800 40 055
            </div>
            <div class="eu-phones">
                Netherlands : 0800 020 35 98<br />Sweden : 020 120 3120<br />United Kingdom : 08000260055
            </div>
            <table>
                <tr>
                    <td class="line">&nbsp;</td>
                    <td><h3><span>JAPAN</span></h3></td>
                    <td class="line">&nbsp;</td>
                </tr>
            </table>
            <p>ご迷惑をお掛けしておりますが、現在ウェブサイトがご利用いただけません。<br />恐れ入りますがしばらくのあいだご静観願います。準備でき次第、ページが自動的に更新されてサイトが表示されます。</p>
            <p>お急ぎの場合は、電話またはメールにてお問い合わせください。<br/>
            電話 ： 受付時間 9：00-17：00（日・祝日も営業）<br />
            0800-8887-447（フリーコール・通話料無料）<br />
            045-435-6100（IP電話/携帯電話専用・通話料有料）<br />
            メール： <a href="mailto:customerservice.japan@patagonia.com">customerservice.japan@patagonia.com</a></p>
    
            <div class="photo-credit">PHOTO: Sonnie Trotter</div>
        </div>
    </div>
<script>
  // Spinner
  var opts = {
    lines: 8, // The number of lines to draw
    length: 8, // The length of each line
    width: 2, // The line thickness
    radius: 6, // The radius of the inner circle
    corners: 1, // Corner roundness (0..1)
    rotate: 0, // The rotation offset
    color: '#fff', // #rgb or #rrggbb
    speed: 0.6, // Rounds per second
    trail: 42, // Afterglow percentage
    shadow: true, // Whether to render a shadow
    hwaccel: false, // Whether to use hardware acceleration
    className: 'spinner', // The CSS class to assign to the spinner
    zIndex: 2e9, // The z-index (defaults to 2000000000)
    top: '4px', // Top position relative to parent in px
    left: '6px' // Left position relative to parent in px
  };
  var target = document.getElementById('spinner-wrap');
  var spinner = new Spinner(opts).spin(target);
</script>

<esi:comment text=" --- STOP CUSTOMIZE BODY HERE --- "/>

</body></html>